<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>AI Tournaments (.io)</title>
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-173346924-1"></script><script>window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js', new Date());gtag('config', 'UA-173346924-1');</script>
		<meta content="width=device-width, initial-scale=1.0" name="viewport">
		<meta content="yes" name="mobile-web-app-capable">
		<style>
			body {
				overflow: hidden;
				background-color: black;
				margin: 0px;
			}

			#wrapper, a, .window, pre {
				margin: 0;
				color: green;
				line-height: 1em;
				font-family: consolas, "Courier New", Courier, Monaco, monospace;
				user-select: none;
			}

			#wrapper {
				color: darkgreen;
			}

			.window {
				position: absolute;
				background-color: rgba(0, 0, 0, .75)
			}
			.window>.header {
				text-align: center;
			}
			.window>.border {
				position: absolute;
				top: 0;
				left: 0;
			}
			.dragable {
				cursor: move;
			}
			.window>.border>.cross-close {
				position: absolute;
				top: 1em;
				right: .65em;
				cursor: pointer;
			}

			.force-new-row {
				white-space: pre-wrap;		/* CSS3 */
				white-space: -moz-pre-wrap;	/* Firefox */
				white-space: -pre-wrap;		/* Opera <7 */
				white-space: -o-pre-wrap;	/* Opera 7 */
				word-wrap: break-word;		/* IE */
			}
		</style>
		<script>
			'use strict'
			var charLineVertical = '┃';
			var charLineHorizontal = '━';
			var charTopLeftCorner = '┏';
			var charTopRightCorner = '┓';
			var charBottomLeftCorner = '┗';
			var charBottomRightCorner = '┛';
			var charLineVerticalRight = '┣';
			var charLineVerticalLeft = '┫';
			var charBoxDown = '┳';
			var charBoxUp = '┻';
			var charCross = '✖';
			var _wrapper;
			var _noise;
			var _charsPerRow = 0;
			function onload(){
				_wrapper = document.getElementById('wrapper');
				calcSize();
				window.onresize = calcSize;
				play();
				addMessage('Work in progress', [
					'Sorry, nothing to see here at the moment.',
					'But get back here soon™ because awesome stuff are coming!',
					'Read more about aitournaments.io over at <a href="https://github.com/AI-Tournaments" target="_blank">GitHub</a>.'
				], true);
			}
			function makeDragable(trigger, dragable=trigger){
				var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
				trigger.onmousedown = dragMouseDown;
				function dragMouseDown(e) {
					e = e || window.event;
					e.preventDefault();
					pos3 = e.clientX;
					pos4 = e.clientY;
					document.onmouseup = closeDragElement;
					document.onmousemove = elementDrag;
				}
				function elementDrag(e) {
					e = e || window.event;
					e.preventDefault();
					pos1 = pos3 - e.clientX;
					pos2 = pos4 - e.clientY;
					pos3 = e.clientX;
					pos4 = e.clientY;
					dragable.style.top = (dragable.offsetTop - pos2) + 'px';
					dragable.style.left = (dragable.offsetLeft - pos1) + 'px';
				}
				function closeDragElement() {
					document.onmouseup = null;
					document.onmousemove = null;
				}
			}
			function addMessage(header='', message=[], center=false){
				function addEmptyRow(element){
					let emptyRow = document.createElement('pre');
					emptyRow.innerHTML = ' ';
					element.appendChild(emptyRow);
				}
				function addWindowBorder(element, longestLine, rows){
					let borderWrapper = document.createElement('div');
					borderWrapper.classList.add('border');
					element.appendChild(borderWrapper);
					let border = document.createElement('pre');
					border.innerHTML = charTopLeftCorner;
					for(let i = 0; i < longestLine; i++){
						if(i === longestLine-3){
							border.innerHTML += charBoxDown;
						}else{
							border.innerHTML += charLineHorizontal;
						}
					}
					border.innerHTML += charTopRightCorner;
					borderWrapper.appendChild(border);
					border = document.createElement('pre');
					let innerHTML = charLineVertical;
					let dragTrigger = document.createElement('span');
					for(let i = 0; i < longestLine; i++){
						if(i === longestLine-3){
							innerHTML += '</span>'+charLineVertical;
						}else{
							innerHTML += ' ';
							if(i === 0){
								innerHTML += '<span class="dragable">';
							}
						}
					}
					border.innerHTML = innerHTML + charLineVertical;
					makeDragable(border.getElementsByClassName('dragable')[0], element);
					borderWrapper.appendChild(border);
					border = document.createElement('pre');
					border.innerHTML = charLineVerticalRight;
					for(let i = 0; i < longestLine; i++){
						if(i === longestLine-3){
							border.innerHTML += charBoxUp;
						}else{
							border.innerHTML += charLineHorizontal;
						}
					}
					border.innerHTML += charLineVerticalLeft;
					borderWrapper.appendChild(border);
					for(let r = 0; r < rows; r++){
						border = document.createElement('pre');
						border.innerHTML = charLineVertical;
						for(let i = 0; i < longestLine; i++){
							border.innerHTML += ' ';
						}
						border.innerHTML += charLineVertical;
						borderWrapper.appendChild(border);
					}
					border = document.createElement('pre');
					border.innerHTML = charBottomLeftCorner;
					for(let i = 0; i < longestLine; i++){
						border.innerHTML += charLineHorizontal;
					}
					border.innerHTML += charBottomRightCorner;
					borderWrapper.appendChild(border);
					let cross = document.createElement('pre');
					cross.innerHTML = charCross;
					cross.classList.add('cross-close');
					cross.onclick = () => {
						element.parentNode.removeChild(element);
					};
					borderWrapper.appendChild(cross);
				}
				let messageWrapper = document.createElement('div');
				messageWrapper.classList.add('window');
				addEmptyRow(messageWrapper);
				let headerDiv = document.createElement('pre');
				headerDiv.innerHTML = header;
				headerDiv.classList.add('header');
				messageWrapper.appendChild(headerDiv);
				addEmptyRow(messageWrapper);
				let longestLine = 0
				for(const row of message){
					let messageDiv = document.createElement('pre');
					messageDiv.classList.add('message');
					messageDiv.innerHTML = '  ' + row + '  ';
					messageWrapper.appendChild(messageDiv);
					longestLine = Math.max(longestLine, strip(messageDiv.innerHTML).length);
				}
				addEmptyRow(messageWrapper);
				longestLine -= 2;
				addWindowBorder(messageWrapper, longestLine, message.length);
				if(center){
					messageWrapper.style.top = (_noise.length/2 - (message.length+4)/2) + 'em';
					messageWrapper.style.left = (_charsPerRow/2 - longestLine/2)/2 + 'em';
				}
				document.body.appendChild(messageWrapper);
			}
			function calcSize(){
				_wrapper.className = 'force-new-row';
				let charsPerRow = 0;
				_wrapper.innerHTML = '0';
				let height = _wrapper.offsetHeight;
				while(_wrapper.offsetHeight === height){
					_wrapper.innerHTML = _wrapper.innerHTML + '0';
					charsPerRow++;
				}
				charsPerRow++;
				height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
				let rows = 2;
				let charsOnFirstRow = _wrapper.innerHTML;
				while(_wrapper.offsetHeight < height){
					rows++;
					_wrapper.innerHTML = _wrapper.innerHTML + charsOnFirstRow;
				}
				_wrapper.className = '';
				initNoise(rows, charsPerRow);
			}
			function initNoise(rows, charsPerRow){
				_charsPerRow = charsPerRow;
				_noise = new Array(rows);
				for(let r = 0; r < rows; r++){
					let chars = '';
					for(let c = 0; c < charsPerRow; c++){
						if(Math.random() < .5){
							chars += '0';
						}else{
							chars += '1';
						}
					}
					_noise[r] = chars;
				}
			}
			function play(){
				_wrapper.innerHTML = parsToString(getNoise());
				window.requestAnimationFrame(play);
			}
			function getNoise(){
				let numberOfChanges = (_noise.length*_noise[0].length)/100;
				for(let c = 0; c < numberOfChanges; c++){
					let row = Math.floor(Math.random()*_noise.length);
					let index = Math.floor(Math.random() * _noise[row].length);
					let chars = _noise[row];
					let _char;
					if(Math.random() < .5){
						_char = '0';
					}else{
						_char = '1';
					}
					_noise[row] = chars.substr(0, index) + _char + chars.substr(index + 1);
				}
				return _noise.slice();
			}
			function parsToString(noise){
				let chars = '';
				for(let n = 0; n < noise.length; n++){
					if(0 < n){
						chars += '\n';
					}
					chars += noise[n];
				}
				return chars;
			}
			function strip(html){
				var output = '';
				do{
					var tempString = output;
					var element = document.createElement('div');
					element.innerHTML = html;
					output = element.textContent || element.innerText || '';
				}
				while(tempString !== output && output !== '');
				return output;
			}
		</script>
	</head>
	<body onload="onload()">
		<pre id="wrapper"></pre>
	</body>
</html>